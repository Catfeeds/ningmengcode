<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>拓课云接口</title>
        <link rel="stylesheet" type="text/css" href="/static/zui/css/zui.css" media="all" />
        <script src="/static/js/jquery.js"></script>
        <!--<script src="/static/js/md5.js"></script>-->
        <script src="/static/zui/js/zui.js"></script>
    </head>
    <body>

        <div id="main">




        </div>
        <script type="text/javascript">
//			enum KeyFormat { "raw", "spki", "pkcs8", "jwk" };

            'use strict';
//             if (!window.crypto || !window.crypto.subtle) {
//                 alert("Your current browser does not support the Web Cryptography API! This page will not work.");
// //                return false;
//             }
			var encoder = new TextEncoder('utf-8');
            var webcrypto = window.crypto || window.msCrypto || window.webkitCrypto || window.mozCrypto;

			// Algorithm Object
			var algorithmKeyGen = {
				name: "RSASSA-PKCS1-v1_5",
				// RsaHashedKeyGenParams
				modulusLength: 2048,
				publicExponent: new Uint8Array([0x01, 0x00, 0x01]),  // Equivalent to 65537
				hash: {
					name: "SHA-256"
				}
			};

			var algorithmSign = {
				name: "RSASSA-PKCS1-v1_5"
			};

			var generateKeyS = window.crypto.subtle.generateKey(algorithmKeyGen, false, ["sign"]).then(
				function(key) {
					var dataPart1 = encoder.encode("hello,");
					var dataPart2 = encoder.encode(" world!");

					return webcrypto.subtle.sign(algorithmSign, key.privateKey, [dataPart1, dataPart2]);
				},
				console.error.bind(console, "Unable to generate a key")
			).then(
				console.log.bind(console, "The signature is: "),
				console.error.bind(console, "Unable to sign")
			);
			alert(generateKeyS);


//            var encoder = new TextEncoder('utf-8');
//            var clearDataArrayBufferView = encoder.encode("Plain Text Data");
//
//            var aesAlgorithmKeyGen = {
//                name: "AES-CBC",
//                // AesKeyGenParams
//                length: 128
//            };
//
//            var aesAlgorithmEncrypt = {
//                name: "AES-CBC",
//                // AesCbcParams
//                iv: window.crypto.getRandomValues(new Uint8Array(16))
//            };
//
//            // Create a key generator to produce a one-time-use AES key to encrypt some data
//            window.crypto.subtle.generateKey(aesAlgorithmKeyGen, false, ["encrypt"]).then(
//                function(aesKey) {
//                    return window.crypto.subtle.encrypt(aesAlgorithmEncrypt, aesKey, [ clearDataArrayBufferView ]);
//                }
//            ).then(console.log.bind(console, "The ciphertext is: "),
//                console.error.bind(console, "Unable to encrypt"));




        </script>
        <script type="">
            






        </script>
        <script type="text/javascript">

//            var arr = {'inlist':'000','aaa':'111','bbb':'222','ccc':{'ddd':444,'eee':555,'list':{'mmm':'VVV','VVV':'MMM'},'info':[{'~~~':"~~~"},{'@@@':"@@@"},{'&&&':'&&&'},],}};
//
//            getStr(arr);
//
//            function getStr(arr) {
//                // alert(arr);
//                var time = 111;
//                var key = $.md5('奶奶个熊');
//                alert(key);
//                var tostr = getStrings(arr,'');
//                instr = $.md5(hex_sha1($.md5(tostr)+key+time));
//                alert(instr);
//            }
//
//            function getStrings(data,str){
//                for (x in data) {
//                    if(isJson(data[x])||isArray(data[x])){
//                        str += x;
//                        str = getStrings(data[x],str);
//                    }else{
//                        str += x+data[x];
//                    }
//                }
//                return str;
//            }
//            function isArray(o){
//                return Object.prototype.toString.call(o)=='[object Array]';
//            }
//            function isJson(obj){
//                return typeof(obj) == "object" && Object.prototype.toString.call(obj).toLowerCase() == "[object object]" && !obj.length;
//            }
        </script>
    </body>

</html>